QiDaoCfg = {   --祈祷数据的相关数据配置
{		--Vip等级为0的时候
SilerCoinGetCount = 283,		--银币系数
SilerCoinPrice = {10},		--购买单价
SilerCoinCanNum = 1,		--购买次数
AnimaGetCount = 200,	--真气系数
AnimaPrice = {20},	--购买单价
AnimaCanNum = 1,	--购买次数
ExpGetCount = 10, --经验系数
ExpPrice = {20},	--购买单价
ExpCanNum = 1,	--购买次数
NextVipCanNum = 7		--下一次VIP可以获取的总次数（面板显示用）
},
{		--Vip等级为1的时候
SilerCoinGetCount = 300,		--银币系数
SilerCoinPrice = {10,20,30},		--购买单价
SilerCoinCanNum = 3,		--购买次数
AnimaGetCount = 293,	--真气系数
AnimaPrice = {20,40},	--购买单价
AnimaCanNum = 2,	--购买次数
ExpGetCount = 20, --经验系数
ExpPrice = {20,40},	--购买单价
ExpCanNum = 2,	--购买次数
NextVipCanNum = 13		--下一次VIP可以获取的总次数（面板显示用）
},
{		--Vip等级为2的时候
SilerCoinGetCount = 400,		--银币系数
SilerCoinPrice = {10,20,30,40,50},		--购买单价
SilerCoinCanNum = 5,		--购买次数
AnimaGetCount = 293,	--真气系数
AnimaPrice = {20,40,60,80},	--购买单价
AnimaCanNum = 4,	--购买次数
ExpGetCount = 30, --经验系数
ExpPrice = {20,40,60,80},	--购买单价
ExpCanNum = 4,	--购买次数
NextVipCanNum = 20		--下一次VIP可以获取的总次数（面板显示用）
},
{		--Vip等级为3的时候
SilerCoinGetCount = 450,		--银币系数
SilerCoinPrice = {10,20,30,40,50,60,70,80},		--购买单价
SilerCoinCanNum = 8,		--购买次数
AnimaGetCount = 293,	--真气系数
AnimaPrice = {20,40,60,80,100,120},	--购买单价
AnimaCanNum = 6,	--购买次数
ExpGetCount = 40, --经验系数
ExpPrice = {20,40,60,80,100,120},	--购买单价
ExpCanNum = 6,	--购买次数
NextVipCanNum = 26		--下一次VIP可以获取的总次数（面板显示用）
},
{		--Vip等级为4的时候
SilerCoinGetCount = 500,		--银币系数
SilerCoinPrice = {10,20,30,40,50,60,70,80,90,100},		--购买单价
SilerCoinCanNum = 10,		--购买次数
AnimaGetCount = 293,	--真气系数
AnimaPrice = {20,40,60,80,100,120,140,160},	--购买单价
AnimaCanNum = 8,	--购买次数
ExpGetCount = 50, --经验系数
ExpPrice = {20,40,60,80,100,120,140,160},	--购买单价
ExpCanNum = 8,	--购买次数
NextVipCanNum = 32		--下一次VIP可以获取的总次数（面板显示用）
},
{		--Vip等级为5的时候
SilerCoinGetCount = 550,		--银币系数
SilerCoinPrice = {10,20,30,40,50,60,70,80,90,100,100,100},		--购买单价
SilerCoinCanNum = 12,		--购买次数
AnimaGetCount = 293,	--真气系数
AnimaPrice = {20,40,60,80,100,120,140,160,180,200},	--购买单价
AnimaCanNum = 10,	--购买次数
ExpGetCount = 60, --经验系数
ExpPrice = {20,40,60,80,100,120,140,160,180,200},	--购买单价
ExpCanNum = 10,	--购买次数
NextVipCanNum = 38		--下一次VIP可以获取的总次数（面板显示用）
},
{		--Vip等级为6的时候
SilerCoinGetCount = 600,		--银币系数
SilerCoinPrice = {10,20,30,40,50,60,70,80,90,100,100,100,100,100},		--购买单价
SilerCoinCanNum = 14,		--购买次数
AnimaGetCount = 293,	--真气系数
AnimaPrice = {20,40,60,80,100,120,140,160,180,200,200,200},	--购买单价
AnimaCanNum = 12,	--购买次数
ExpGetCount = 70, --经验系数
ExpPrice = {20,40,60,80,100,120,140,160,180,200,200,200},	--购买单价
ExpCanNum = 12,	--购买次数
NextVipCanNum = 46		--下一次VIP可以获取的总次数（面板显示用）
},
{		--Vip0等级为7的时候
SilerCoinGetCount = 700,		--银币系数
SilerCoinPrice = {10,20,30,40,50,60,70,80,90,100,100,100,100,100,100,100,100,100},		--购买单价
SilerCoinCanNum = 18,		--购买次数
AnimaGetCount = 293,	--真气系数
AnimaPrice = {20,40,60,80,100,120,140,160,180,200,200,200,200,200},	--购买单价
AnimaCanNum = 14,	--购买次数
ExpGetCount = 80, --经验系数
ExpPrice = {20,40,60,80,100,120,140,160,180,200,200,200,200,200},	--购买单价
ExpCanNum = 14,	--购买次数
NextVipCanNum = 54		--下一次VIP可以获取的总次数（面板显示用）
},
{		--Vip0等级为8的时候
SilerCoinGetCount = 800,		--银币系数
SilerCoinPrice = {10,20,30,40,50,60,70,80,90,100,100,100,100,100,100,100,100,100,100,100,100,100},		--购买单价
SilerCoinCanNum = 22,		--购买次数
AnimaGetCount = 293,	--真气系数
AnimaPrice = {20,40,60,80,100,120,140,160,180,200,200,200,200,200,200,200},	--购买单价
AnimaCanNum = 16,	--购买次数
ExpGetCount = 90, --经验系数
ExpPrice = {20,40,60,80,100,120,140,160,180,200,200,200,200,200,200,200},	--购买单价
ExpCanNum = 16,	--购买次数
NextVipCanNum = 62		--下一次VIP可以获取的总次数（面板显示用）
},
{		--Vip0等级为9的时候
SilerCoinGetCount = 900,		--银币系数
SilerCoinPrice = {10,20,30,40,50,60,70,80,90,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},		--购买单价
SilerCoinCanNum = 26,		--购买次数
AnimaGetCount = 293,	--真气系数
AnimaPrice = {20,40,60,80,100,120,140,160,180,200,200,200,200,200,200,200,200,200},	--购买单价
AnimaCanNum = 18,	--购买次数
ExpGetCount = 95, --经验系数
ExpPrice = {20,40,60,80,100,120,140,160,180,200,200,200,200,200,200,200,200,200},	--购买单价
ExpCanNum = 18,	--购买次数
NextVipCanNum = 70		--下一次VIP可以获取的总次数（面板显示用）
},
{		--Vip0等级为10的时候
SilerCoinGetCount = 943,		--银币系数
SilerCoinPrice = {10,20,30,40,50,60,70,80,90,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},		--购买单价
SilerCoinCanNum = 30,		--购买次数
AnimaGetCount = 293,	--真气系数
AnimaPrice = {20,40,60,80,100,120,140,160,180,200,200,200,200,200,200,200,200,200,200,200},	--购买单价
AnimaCanNum = 20,	--购买次数
ExpGetCount = 100, --经验系数
ExpPrice = {20,40,60,80,100,120,140,160,180,200,200,200,200,200,200,200,200,200,200,200},	--购买单价
ExpCanNum = 20,	--购买次数
NextVipCanNum = 0		--下一次VIP可以获取的总次数（面板显示用）
},
};


function ReturnGetCoin(BaseCoin)
	local level = GetPlayerData(0, 10)
	return BaseCoin * level
end


function ReturnGetSp(BaseSp)
	local level = GetPlayerData(0, 10)
	return BaseSp * level
end


function ReturnGetExp(BaseExp)--10*等级^1.2*6
	local level = GetPlayerData(0, 10)
	return BaseExp * level^1.2*6
end

function ReturnCurVipQiDaoInfo(VipLevel)	--返回当前VIP的祈祷信息
	local TempQiDaoCfg = deepcopy(QiDaoCfg[VipLevel])
	-- if VipLevel > 1 then
	-- 	TempQiDaoCfg.SilerCoinCanNum = TempQiDaoCfg.SilerCoinCanNum + VIPQiDaoCfg[VipLevel - 1][1]
	-- 	TempQiDaoCfg.AnimaCanNum = TempQiDaoCfg.AnimaCanNum + VIPQiDaoCfg[VipLevel - 1][2]
	-- 	TempQiDaoCfg.ExpCanNum = TempQiDaoCfg.ExpCanNum + VIPQiDaoCfg[VipLevel - 1][3]
	-- end
	return TempQiDaoCfg
end;


function AddOneQiDao(VipLevel, QiDaoType, CurTypeUsedNum)		--玩家领取一次相关的祈祷，QiDaoType(0：为银币 1：灵力 2：经验)
	if QiDaoType == 0 then
		CurCanUseingCoin = QiDaoCfg[VipLevel].SilerCoinCanNum - CurTypeUsedNum
		if CurCanUseingCoin < 1 then
			return 0		--当前次数不够
		end
		local bMoneyEnough = CheckPlayerMoney(1, QiDaoCfg[VipLevel].SilerCoinPrice[CurTypeUsedNum + 1], 1)
		if bMoneyEnough == 0 or bMoneyEnough == nil  then
			return 1		--当前金币数不够
		else
			ChangeMoney(1, -QiDaoCfg[VipLevel].SilerCoinPrice[CurTypeUsedNum + 1]);
			return 2, ReturnGetCoin(QiDaoCfg[VipLevel].SilerCoinGetCount)
		end
	elseif QiDaoType == 1 then
		CurCanUseingAnima = QiDaoCfg[VipLevel].AnimaCanNum - CurTypeUsedNum
		if CurCanUseingAnima < 1 then
			return 0		--当前次数不够
		end
		local bMoneyEnough = CheckPlayerMoney(1, QiDaoCfg[VipLevel].AnimaPrice[CurTypeUsedNum + 1], 1)
		if bMoneyEnough == 0 or bMoneyEnough == nil  then
			return 1		--当前金币数不够
		else
			ChangeMoney(1, -QiDaoCfg[VipLevel].AnimaPrice[CurTypeUsedNum + 1]);
			return 2, ReturnGetSp(QiDaoCfg[VipLevel].AnimaGetCount)
		end
	else
		CurCanUseingExp = QiDaoCfg[VipLevel].ExpCanNum - CurTypeUsedNum
		if CurCanUseingExp < 1 then
			return 0		--当前次数不够
		end
		local bMoneyEnough = CheckPlayerMoney(1, QiDaoCfg[VipLevel].ExpPrice[CurTypeUsedNum + 1], 1)
		if bMoneyEnough == 0 or bMoneyEnough == nil  then
			return 1		--当前金币数不够
		else
			ChangeMoney(1, -QiDaoCfg[VipLevel].ExpPrice[CurTypeUsedNum + 1]);
			return 2, ReturnGetExp(QiDaoCfg[VipLevel].ExpGetCount)
		end
	end
	return
end


--[[PlayerUsedQiDaoList = {};	--玩家每天使用祈祷的日志情况

function ReturnCurVipQiDaoInfo111(PlayerInfo, VipLevel)	--返回当前VIP的祈祷信息
	if type(VipLevel) == "number" and  (not PlayerUsedQiDaoList[PlayerInfo]) then   	--玩家是否为第一次请求祈祷，并保存请求该祈祷的日期
		PlayerUsedQiDaoList[PlayerInfo] = {};
		PlayerUsedQiDaoList[PlayerInfo].SilerCoinUsedNum = 0
		PlayerUsedQiDaoList[PlayerInfo].AnimaUsedNum = 0
		PlayerUsedQiDaoList[PlayerInfo].ExpUsedNum = 0
		PlayerUsedQiDaoList[PlayerInfo].PreReqTime = os.date("*t", os.time())
	elseif type(VipLevel) == "number" and PlayerUsedQiDaoList[PlayerInfo] then     --玩家不是第一次请求祈祷信息，判断是否为当天的N次请求祈祷，如果不是，24小时重置祈祷
		ThisReqTime = os.date("*t", os.time())
		if PlayerUsedQiDaoList[PlayerInfo].PreReqTime.year ~= ThisReqTime.year or
		PlayerUsedQiDaoList[PlayerInfo].PreReqTime.month ~= ThisReqTime.month or
		PlayerUsedQiDaoList[PlayerInfo].PreReqTime.day ~= ThisReqTime.day then	--已经是24小时重置了
			PlayerUsedQiDaoList[PlayerInfo].SilerCoinUsedNum = 0
			PlayerUsedQiDaoList[PlayerInfo].AnimaUsedNum = 0
			PlayerUsedQiDaoList[PlayerInfo].ExpUsedNum = 0
			PlayerUsedQiDaoList[PlayerInfo].PreReqTime =  ThisReqTime
		end
	end
	return PlayerUsedQiDaoList[PlayerInfo].SilerCoinUsedNum, PlayerUsedQiDaoList[PlayerInfo].AnimaUsedNum, PlayerUsedQiDaoList[PlayerInfo].ExpUsedNum, QiDaoCfg[VipLevel]
end;

function AddOneQiDao111(PlayerInfo, VipLevel, QiDaoType, PlayerAllMoney)		--玩家领取一次相关的祈祷，QiDaoType(0：为银币 1：灵力 2：经验)
	if QiDaoType == 0 then
		CurCanUseingCoin = QiDaoCfg[VipLevel].SilerCoinCanNum - PlayerUsedQiDaoList[PlayerInfo].SilerCoinUsedNum
		if CurCanUseingCoin < 1 then
			return 0, 0, 0		--当前次数不够
		elseif PlayerAllMoney < QiDaoCfg[VipLevel].SilerCoinPrice then
			return 1, 0, 0		--当前金币数不够
		else
			PlayerUsedQiDaoList[PlayerInfo].SilerCoinUsedNum = PlayerUsedQiDaoList[PlayerInfo].SilerCoinUsedNum + 1
			return 2, QiDaoCfg[VipLevel].SilerCoinPrice, QiDaoCfg[VipLevel].SilerCoinGetCount
		end
	elseif QiDaoType == 1 then
		CurCanUseingAnima = QiDaoCfg[VipLevel].AnimaCanNum - PlayerUsedQiDaoList[PlayerInfo].AnimaUsedNum
		if CurCanUseingAnima < 1 then
			return 0, 0, 0		--当前次数不够
		elseif PlayerAllMoney < QiDaoCfg[VipLevel].AnimaPrice then
			return 1, 0, 0		--当前金币数不够
		else
			PlayerUsedQiDaoList[PlayerInfo].AnimaUsedNum = PlayerUsedQiDaoList[PlayerInfo].AnimaUsedNum + 1
			return 2, QiDaoCfg[VipLevel].AnimaPrice, QiDaoCfg[VipLevel].AnimaGetCount
		end
	else
		CurCanUseingExp = QiDaoCfg[VipLevel].ExpCanNum - PlayerUsedQiDaoList[PlayerInfo].ExpUsedNum
		if CurCanUseingExp < 1 then
			return 0, 0, 0		--当前次数不够
		elseif PlayerAllMoney < QiDaoCfg[VipLevel].ExpPrice then
			return 1, 0, 0		--当前金币数不够
		else
			PlayerUsedQiDaoList[PlayerInfo].ExpUsedNum = PlayerUsedQiDaoList[PlayerInfo].ExpUsedNum + 1
			return 2, QiDaoCfg[VipLevel].ExpPrice, QiDaoCfg[VipLevel].ExpGetCount
		end
	end
	return
end
--]]
